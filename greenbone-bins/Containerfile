FROM docker.io/library/ubuntu:22.04

# RUN echo "Installing dependencies" && \
#     dnf install -y \
#         libbsd \
#         libbsd-devel \
#         libical-devel \
#         xsltproc \
#         glib2-devel \
#         gnutls-devel \
#         postgresql-server-devel \
#         libical-devel \
#         texlive-scheme-medium \
#         texlive-fontawesome \
#         texlive-fontmfizz \
#         texlive-fonts-churchslavonic \
#         texlive-fontsetup \
#         texlive-fontsize \
#         texlive-fonttable \
#         fontawesome-fonts \
#         gnupg2-smime \
#         openssh-clients \
#         xmlstarlet \
#         zip \
#         rpm \
#         fakeroot \
#         dpkg \
#         mingw64-nsis \
#         gnupg \
#         wget \
#         sshpass \
#         socat \
#         samba-client \
#         python3-lxml \
#         gnutls-utils \
#         perl-XML-Twig \
#         rsync \
#         binutils \
#         cmake \
#         python3-pip \
#         gcc-c++ \
#         gettext \
#         diffstat \
#         doxygen \
#         git \
#         patch \
#         patchutils \
#         subversion \
#         systemtap \
#         buildbot \
#         colordiff \
#         cvs \
#         cvs2cl \
#         cvsps \
#         darcs \
#         dejagnu \
#         expect \
#         gambas3-ide \
#         git-annex \
#         git-cola \
#         git2cl \
#         gitg \
#         gtranslator \
#         highlight \
#         lcov \
#         manedit \
#         meld \
#         monotone \
#         myrepos \
#         nemiver \
#         qgit \
#         quilt \
#         rapidsvn \
#         rcs \
#         robodoc \
#         scanmem \
#         subunit \
#         svn2cl \
#         tig \
#         tortoisehg \
#         translate-toolkit \
#         utrac \
#         gcc \
#         openssl-devel \
#         bzip2-devel \
#         elfutils-devel \
#         libselinux-devel \
#         elfutils-libelf-devel \
#         rpm-devel \
#         perl-devel \
#         python3-devel \
#         python3-setuptools \
#         chrpath \
#         mariadb-connector-c-devel \
#         glib2-devel \
#         gpgme-devel \
#         gnutls-devel \
#         libgcrypt-devel \
#         libuuid-devel \
#         libssh-devel \
#         hiredis-devel \
#         libxml2-devel \
#         libpcap-devel \
#         libnet-devel \
#         paho-c-devel \
#         openldap-devel \
#         radcli-devel \
#         postgresql-server \
#         postgresql-server-devel \
#         postgresql-contrib \
#         wget \
#         sshpass \
#         samba-client \
#         python3-lxml \
#         gnutls-utils \
#         perl \
#         perl-XML-Twig \
#         libmicrohttpd-devel \
#         popt-devel \
#         libunistring-devel \
#         ncurses-devel \
#         heimdal-devel \
#         bison \
#         libksba-devel \
#         nmap \
#         json-glib-devel \
#         python3-impacket \
#         python3 \
#         python3-setuptools \
#         python3-packaging \
#         python3-wrapt \
#         python3-cffi \
#         python3-psutil \
#         python3-defusedxml \
#         python3-paramiko \
#         python3-redis \
#         python3-gnupg \
#         python3-paho-mqtt \
#         redis \
#         policycoreutils-python-utils \
#         mosquitto \
#         cronie \
#         texlive-fontsize \
#         texlive-fonttable \
#         fontawesome-fonts \
#         gnupg2-smime \
#         xmlstarlet \
#         zip \
#         fakeroot \
#         dpkg \
#         mingw64-nsis \
#         mingw64-gcc \
#         wget \
#         sshpass \
#         samba-client \
#         python3-lxml \
#         gnutls-utils \
#         perl \
#         perl-XML-Twig \
#         libmicrohttpd-devel \
#         popt-devel \
#         libunistring-devel \
#         ncurses-devel \
#         heimdal-devel \
#         bison \
#         libksba-devel \
#         nmap \
#         json-glib-devel \
#         redis \
#         policycoreutils-python-utils

COPY install-deps.sh /tmp/install-deps.sh

RUN chmod +x /tmp/install-deps.sh && \
     /tmp/install-deps.sh

COPY gvm-build-from-source-ubuntu.sh /tmp/build-greenbone.sh

RUN chmod +x /tmp/build-greenbone.sh \
    && /tmp/build-greenbone.sh \
    && rm -rf /tmp/* \